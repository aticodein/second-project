{"changed":true,"filter":false,"title":"graphs.js","tooltip":"/assets/js/graphs.js","value":"queue()\n    .defer(d3.csv, \"assets/data/Titanic.csv\")\n    .await(makeGraphs);\n    \nfunction makeGraphs(error, titanicData) {\n    var ndx = crossfilter(titanicData);\n    \n    function age_to_integer(arg1) {\n        titanicData.forEach(function(d) {\n            var age_lower = arg1.toLowerCase();\n            if (d[arg1] == \"NA\") {\n                d[age_lower] = \"\";\n            }\n            else {\n                d[age_lower] = Math.round(d[arg1]);\n            }\n        });\n    }\n\n    age_to_integer(\"Age\");\n    \nshow_gender_selector(ndx);\nshow_gender_balance(ndx);\nshow_survived_selector(ndx);\nshow_class_balance(ndx);\nshow_survived_balance(ndx);\nshow_surv_balance(ndx);\nshow_age_balance(ndx);\n\n\ndc.renderAll();\n\n}\n\nfunction show_gender_selector(ndx) {\n    var dim = ndx.dimension(dc.pluck('Sex'));\n    var dim = ndx.dimension(function(d){\n           \n          if (d.Sex === \"male\") {\n            return \"Male\";\n          } else {\n            return \"Female\";\n        }\n    });\n    var group = dim.group();\n    \n    dc.selectMenu(\"#gender\")\n        .dimension(dim)\n        .group(group);\n}\n\nfunction show_survived_selector(ndx) {\n    var dim = ndx.dimension(dc.pluck('Survived'));\n        var dim = ndx.dimension(function(d){\n           \n          if (d.Survived === \"1\") {\n            return \"Survived\";\n          } else {\n            return \"Died\";\n        }\n    });\n    var group = dim.group();\n    \n    dc.selectMenu(\"#survived\")\n        .dimension(dim)\n        .group(group);\n}\n\nfunction show_gender_balance(ndx) {\n    var dim = ndx.dimension(dc.pluck('Sex'));\n    var group = dim.group();\n    var BarChartColors = d3.scale.ordinal()\n        .range(['#F1948A','#4285F4']);\n        \n    dc.barChart(\"#gender-balance\")\n        .width(400)\n        .height(300)\n        .margins({top: 10, right: 50, bottom: 30, left: 50})\n        .dimension(dim)\n        .group(group)\n        .colorAccessor(function(d) {\n            return d.key;\n        })\n        .colors(BarChartColors)\n        .transitionDuration(500)\n        .x(d3.scale.ordinal())\n        .xUnits(dc.units.ordinal)\n        .elasticY(true)\n        .xAxisLabel(\"Gender\")\n        .yAxis().ticks(10);\n        \n}\n\nfunction show_surv_balance(ndx) {\n    var dimSurvived = ndx.dimension(dc.pluck('Survived'));\n        var dim = ndx.dimension(function(d){\n           \n        \n        if (d.Survived === \"1\") {\n            return \"Survived\";\n        } else {\n            return \"Died\";\n        }\n    });\n    var group = dim.group();\n    var survivorsBarChartColors = d3.scale.ordinal()\n        .range(['#7B241C', '#F5B041']);\n     \n    dc.barChart(\"#surv-balance\")\n        .width(400)\n        .height(300)\n        .margins({top: 10, right: 50, bottom: 30, left: 50})\n        .group(group)\n        .dimension(dim)\n        .colorAccessor(function(d) {\n            return d.key;\n        })\n        .colors(survivorsBarChartColors)\n        .title(function(dTag) {\n            if (dTag.key === \"Survived\")\n             return dTag.value + \" Survived \";\n              \n             else {\n                return dTag.value + \" Passengers Died\";\n               }\n        })\n        \n        .transitionDuration(500)\n        .x(d3.scale.ordinal())\n        .xUnits(dc.units.ordinal)\n        .elasticY(true)\n        .xAxisLabel(\"Survivors\")\n        .yAxisLabel(\"Person\")\n        .yAxis().ticks(10);\n        \n        \n        \n}\n\nfunction show_survived_balance(ndx) {\n\n    var survived_dim = ndx.dimension(dc.pluck('Survived'));\n    var show_survived_balance = survived_dim.group();\n    var survivorsPieChartColors = d3.scale.ordinal()\n        .range(['#E67E22', '#F39C12']);\n    function survivors(k, v) {\n        if (k === \"1\") {\n            return \"There were \" + v + \" survivors\";\n        }\n        else {\n            return v + \" passengers died\";\n        }\n    }\n\n    dc.pieChart('#survived-pie-chart')\n        .height(330)\n        .radius(90)\n        .transitionDuration(1500)\n        .dimension(survived_dim)\n        .group(show_survived_balance)\n        .colors(survivorsPieChartColors)\n        .on('pretransition', function(chart) {\n            chart.selectAll('text.pie-slice').text(function(d) {\n                \n                  if (d.data.key === \"1\") {\n                   return (\"Survived\");\n                }\n                   else {return (\"Died\");\n               }\n            });\n        })\n        .title(function(d) {\n            return survivors(d.key, d.value);\n        });\n}\n\nfunction show_class_balance(ndx) {\n    var dim = ndx.dimension(dc.pluck('PClass'));\n    var group = dim.group();\n    var BarChartColors = d3.scale.ordinal()\n        .range(['#E67E22','gold','#F39C12']);\n        \n    dc.barChart(\"#class-chart\")\n        .width(400)\n        .height(300)\n        .margins({top: 10, right: 50, bottom: 30, left: 50})\n        .dimension(dim)\n        .group(group)\n        .colorAccessor(function(d) {\n            return d.key;\n        })\n        .colors(BarChartColors)\n        .transitionDuration(500)\n        .x(d3.scale.ordinal())\n        .xUnits(dc.units.ordinal)\n        .elasticY(true)\n        .xAxisLabel(\"Class of Passengers\")\n        .yAxis().ticks(10);\n}\n\n\nfunction show_age_balance(ndx) {\n    var ageDim = ndx.dimension(dc.pluck('age'));\n    var ageGroup = ageDim.group();\n         function remove_empty_strings(ageGroup) {\n          return {\n              all:function () {\n                   return ageGroup.all().filter(function(d) {\n                    \n                    \n                  return d.key !== \"\";\n                    \n                  });\n               }\n           };\n      }\n    \n    var filtered =remove_empty_strings(ageGroup);\n  \n     var BarChartColors = d3.scale.ordinal()\n        .range(['#7B241C','#F39C12','#F7DC6F']);\n     \n    dc.barChart(\"#age-balance-chart\")\n        .width(1000)\n        .height(300)\n        .margins({ top: 10, right: 50, bottom: 30, left: 50 })\n        .dimension(ageDim)\n        .group(filtered)\n        .colorAccessor(function(d) {\n            return d.key;\n        })\n        .colors(BarChartColors)\n        .transitionDuration(500)\n        .x(d3.scale.ordinal())\n        .xUnits(dc.units.ordinal)\n        .elasticY(true)\n        .xAxisLabel(\"Age of Passengers\")\n        .yAxis().ticks(2);\n}","undoManager":{"mark":7,"position":-1,"stack":[[{"start":{"row":53,"column":8},"end":{"row":53,"column":9},"action":"insert","lines":[" "],"id":274},{"start":{"row":53,"column":9},"end":{"row":53,"column":10},"action":"insert","lines":[" "]},{"start":{"row":53,"column":10},"end":{"row":53,"column":11},"action":"insert","lines":[" "]},{"start":{"row":53,"column":11},"end":{"row":53,"column":12},"action":"insert","lines":[" "]},{"start":{"row":53,"column":12},"end":{"row":53,"column":13},"action":"insert","lines":[" "]},{"start":{"row":53,"column":13},"end":{"row":53,"column":14},"action":"insert","lines":[" "]}],[{"start":{"row":53,"column":4},"end":{"row":53,"column":5},"action":"insert","lines":[" "],"id":274},{"start":{"row":53,"column":5},"end":{"row":53,"column":6},"action":"insert","lines":[" "]},{"start":{"row":53,"column":6},"end":{"row":53,"column":7},"action":"insert","lines":[" "]},{"start":{"row":53,"column":7},"end":{"row":53,"column":8},"action":"insert","lines":[" "]}],[{"start":{"row":53,"column":4},"end":{"row":53,"column":8},"action":"remove","lines":["    "],"id":275}],[{"start":{"row":53,"column":10},"end":{"row":53,"column":11},"action":"remove","lines":["r"],"id":276},{"start":{"row":53,"column":9},"end":{"row":53,"column":10},"action":"remove","lines":["a"]},{"start":{"row":53,"column":8},"end":{"row":53,"column":9},"action":"remove","lines":["v"]}],[{"start":{"row":53,"column":20},"end":{"row":53,"column":21},"action":"remove","lines":["x"],"id":277},{"start":{"row":53,"column":19},"end":{"row":53,"column":20},"action":"remove","lines":["d"]},{"start":{"row":53,"column":18},"end":{"row":53,"column":19},"action":"remove","lines":["n"]},{"start":{"row":53,"column":17},"end":{"row":53,"column":18},"action":"remove","lines":[" "]},{"start":{"row":53,"column":16},"end":{"row":53,"column":17},"action":"remove","lines":["="]},{"start":{"row":53,"column":15},"end":{"row":53,"column":16},"action":"remove","lines":[" "]},{"start":{"row":53,"column":14},"end":{"row":53,"column":15},"action":"remove","lines":["m"]},{"start":{"row":53,"column":13},"end":{"row":53,"column":14},"action":"remove","lines":["i"]},{"start":{"row":53,"column":12},"end":{"row":53,"column":13},"action":"remove","lines":["d"]},{"start":{"row":53,"column":11},"end":{"row":53,"column":12},"action":"remove","lines":[" "]}],[{"start":{"row":53,"column":31},"end":{"row":53,"column":32},"action":"remove","lines":["("],"id":278},{"start":{"row":53,"column":30},"end":{"row":53,"column":31},"action":"remove","lines":["n"]},{"start":{"row":53,"column":29},"end":{"row":53,"column":30},"action":"remove","lines":["o"]},{"start":{"row":53,"column":28},"end":{"row":53,"column":29},"action":"remove","lines":["i"]},{"start":{"row":53,"column":27},"end":{"row":53,"column":28},"action":"remove","lines":["s"]},{"start":{"row":53,"column":26},"end":{"row":53,"column":27},"action":"remove","lines":["n"]},{"start":{"row":53,"column":25},"end":{"row":53,"column":26},"action":"remove","lines":["e"]},{"start":{"row":53,"column":24},"end":{"row":53,"column":25},"action":"remove","lines":["m"]},{"start":{"row":53,"column":23},"end":{"row":53,"column":24},"action":"remove","lines":["i"]},{"start":{"row":53,"column":22},"end":{"row":53,"column":23},"action":"remove","lines":["d"]},{"start":{"row":53,"column":21},"end":{"row":53,"column":22},"action":"remove","lines":["."]}],[{"start":{"row":60,"column":6},"end":{"row":60,"column":7},"action":"remove","lines":[";"],"id":279},{"start":{"row":60,"column":5},"end":{"row":60,"column":6},"action":"remove","lines":[")"]},{"start":{"row":60,"column":4},"end":{"row":60,"column":5},"action":"remove","lines":["}"]}],[{"start":{"row":59,"column":9},"end":{"row":59,"column":10},"action":"insert","lines":[";"],"id":280}]]},"ace":{"folds":[{"start":{"row":38,"column":33},"end":{"row":39,"column":26},"placeholder":"..."},{"start":{"row":40,"column":18},"end":{"row":42,"column":8},"placeholder":"..."}],"scrolltop":2595,"scrollleft":0,"selection":{"start":{"row":25,"column":27},"end":{"row":25,"column":27},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":7,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1564662295884}